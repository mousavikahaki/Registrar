function Nifti_Save(IM,x,y,z,FileName,FileLocation)

info.Description = 'Generated using MATLAB R2017b By Neurogeometry lab (http://neurogeometry.com/)';
info.Filename = FileName;
info.Filemoddate = datetime('now');
info.Filesize = numel(IM);
info.Description = ''; 
info.ImageSize = size(IM); 
info.PixelDimensions = [1,1,1];
info.Datatype = class(IM); 
info.BitsPerPixel = 8; 
info.SpaceUnits = 'Unknown'; 
info.TimeUnits = 'None'; 
info.AdditiveOffset = 0; 
info.MultiplicativeScaling = 0; 
info.TimeOffset = 0; 
info.SliceCode= 'Unknown';  
info.FrequencyDimension= 0; 
info.PhaseDimension= 0; 
info.SpatialDimension = 2; 
info.DisplayIntensityRange = [0,0] ;
info.TransformName = 'None'; 
info.Transform.Dimensionality = 3; 
info.Transform.T = diag([1,1,1,1]);
info.Qfactor = 1; 

info.raw.sizeof_hdr = '';
info.raw.dim_info = '';
info.raw.dim = [3,size(IM,1),size(IM,2),size(IM,3),1,1,1,1];
info.raw.intent_p1 = 0;
info.raw.intent_p2 = 0;
info.raw.intent_p3 = 0;
info.raw.intent_code = 0;
info.raw.datatype = 2;
info.raw.bitpix = 8;
info.raw.slice_start = 0;
info.raw.pixdim = [512,512,1,1,0,0,0,0];
info.raw.vox_offset = 352;
info.raw.scl_slope = 0;
info.raw.scl_inter = 0;
info.raw.slice_end = 0;
info.raw.slice_code = 0;
info.raw.xyzt_units = 0;
info.raw.cal_max = 0;
info.raw.cal_min = 0;
info.raw.slice_duration = 0;
info.raw.toffset = 0;
info.raw.descrip = '';
info.raw.aux_file = '';
info.raw.qform_code = 0;
info.raw.sform_code = 0;
info.raw.quatern_b = 0;
info.raw.quatern_c = 0;
info.raw.quatern_d = 0;
info.raw.qoffset_x = x;
info.raw.qoffset_y = y;
info.raw.qoffset_z = z;
info.raw.srow_x = [0,0,0,0];
info.raw.srow_y = [0,0,0,0];
info.raw.srow_z = [0,0,0,0];
info.raw.intent_name = '';
info.raw.magic = 'n+1';
% https://www.mathworks.com/help/images/ref/niftiwrite.html
niftiwrite(IM,[FileLocation,'\',FileName,'.nii'],info);